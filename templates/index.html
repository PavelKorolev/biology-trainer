<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <title>–¢—Ä–µ–Ω–∞–∂—ë—Ä –ø–æ –±–∏–æ–ª–æ–≥–∏–∏</title>

    <style>
        body {
            font-family: Arial, sans-serif;
            max-width: 900px;
            margin: 30px auto;
            line-height: 1.5;
        }

        h2 {
            margin-bottom: 5px;
        }

        .mode {
            color: #666;
            margin-bottom: 10px;
        }

        .progress-box {
            background: #f4f7ff;
            padding: 12px;
            border-radius: 8px;
            margin-bottom: 15px;
        }

        .calendar {
            background: #fafafa;
            padding: 10px;
            border-radius: 8px;
            margin-bottom: 20px;
            font-size: 14px;
        }

        .calendar li {
            margin-bottom: 4px;
        }

        .question {
            font-size: 17px;
            margin-bottom: 15px;
        }

        .options label {
            display: block;
            margin: 6px 0;
            padding: 6px 8px;
            cursor: pointer;
            border-radius: 4px;
        }

        .options label:hover {
            background: #f0f0f0;
        }

        button {
            margin-top: 15px;
            padding: 8px 16px;
            font-size: 14px;
            cursor: pointer;
        }

        .correct {
            color: green;
            font-weight: bold;
        }

        .wrong {
            color: red;
            font-weight: bold;
        }

        .mode-badge {
            font-size: 13px;
            color: #444;
            margin-bottom: 10px;
        }

        hr {
            margin: 25px 0;
        }
    </style>
</head>

<body>

<h2>
    {% if mode == "all" %}
        –ö—Ä—É–≥ 1 ‚Äî –≤—Å–µ –≤–æ–ø—Ä–æ—Å—ã
    {% elif mode == "errors" %}
        –ü–æ–≤—Ç–æ—Ä –æ—à–∏–±–æ–∫ üí™
    {% else %}
        üî• –ß–∞—Å—Ç–æ –æ—à–∏–±–æ—á–Ω—ã–µ –≤–æ–ø—Ä–æ—Å—ã
    {% endif %}
</h2>

<p class="mode">
    –í–æ–ø—Ä–æ—Å {{ current }} –∏–∑ {{ total }}
</p>

<progress value="{{ current }}" max="{{ total }}"></progress>

<!-- üìä —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –∑–∞ —Å–µ–≥–æ–¥–Ω—è -->
{% if progress["days"] and today in progress["days"] %}
<div class="progress-box">
    <strong>üìä –°–µ–≥–æ–¥–Ω—è:</strong>
    {{ progress["days"][today].answered }} –≤–æ–ø—Ä–æ—Å–æ–≤,
    {{ progress["days"][today].correct }} –ø—Ä–∞–≤–∏–ª—å–Ω–æ
</div>
{% endif %}

<!-- üìÖ –∫–∞–ª–µ–Ω–¥–∞—Ä—å –ø—Ä–æ–≥—Ä–µ—Å—Å–∞ -->
{% if progress["days"] %}
<div class="calendar">
    <strong>üìÖ –ü—Ä–æ–≥—Ä–µ—Å—Å –ø–æ –¥–Ω—è–º:</strong>
    <ul>
        {% for d, stat in progress["days"].items() %}
            <li>
                {{ d }} ‚Äî
                {{ stat.answered }} –≤–æ–ø—Ä–æ—Å–æ–≤,
                {{ stat.correct }} –ø—Ä–∞–≤–∏–ª—å–Ω–æ
            </li>
        {% endfor %}
    </ul>
</div>
{% endif %}

<hr>

<div class="question">
    <strong>{{ question.question }}</strong>
</div>

<form method="post" action="/check">
    <input type="hidden" name="id" value="{{ question.id }}">

    <div class="options">
        {% for key, text in options_items %}
            <label>
                <input
                    type="checkbox"
                    name="selected"
                    value="{{ key }}"
                    {% if key in selected %}checked{% endif %}
                >
                {{ key }}) {{ text }}
            </label>
        {% endfor %}
    </div>

    {% if result is none %}
        <button type="submit">–û—Ç–≤–µ—Ç–∏—Ç—å</button>
    {% endif %}
</form>

{% if result is not none %}
    <hr>

    {% if result %}
        <p class="correct">‚úÖ –ü—Ä–∞–≤–∏–ª—å–Ω–æ</p>
    {% else %}
        <p class="wrong">‚ùå –ï—Å—Ç—å –æ—à–∏–±–∫–∞</p>

        {% if question.correct | length == 0 %}
            <p><em>–ü—Ä–∞–≤–∏–ª—å–Ω—ã—Ö –≤–∞—Ä–∏–∞–Ω—Ç–æ–≤ –Ω–µ—Ç</em></p>
        {% else %}
            <p><strong>–ü—Ä–∞–≤–∏–ª—å–Ω—ã–µ –æ—Ç–≤–µ—Ç—ã:</strong></p>
            <ul>
                {% for key in question.correct %}
                    <li>
                        <strong>{{ key }})</strong>
                        {{ question.options[key] }}
                    </li>
                {% endfor %}
            </ul>
        {% endif %}
    {% endif %}

    <form method="post" action="/next">
        <button type="submit">–î–∞–ª—å—à–µ ‚ûú</button>
    </form>
{% endif %}

</body>
</html>